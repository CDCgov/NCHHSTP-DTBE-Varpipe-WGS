{
  "summary": "Combined tool that performs all steps: read filtering, microbe reference alignment, and abundance scoring",
  "arguments": [
    {
      "summary": "If true, adds a command line header line to created VCF files.",
      "name": "--add-output-vcf-command-line",
      "synonyms": "-add-output-vcf-command-line",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "true",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "read one or more arguments files and add them to the command line",
      "name": "--arguments_file",
      "synonyms": "NA",
      "type": "List[File]",
      "required": "no",
      "fulltext": "",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "maximum number of bytes to read from a file into each partition of reads. Setting this higher will result in fewer partitions. Note that this will not be equal to the size of the partition in memory. Defaults to 0, which uses the default split size (determined by the Hadoop input format, typically the size of one HDFS block).",
      "name": "--bam-partition-size",
      "synonyms": "NA",
      "type": "long",
      "required": "no",
      "fulltext": "",
      "defaultValue": "0",
      "minValue": "-Infinity",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Minimum score threshold for microbe alignments",
      "name": "--bwa-score-threshold",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "This parameter controls the minimum quality of the BWA alignments for the output.",
      "defaultValue": "30",
      "minValue": "0.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Spark properties to set on the Spark context in the format \u003cproperty\u003e\u003d\u003cvalue\u003e",
      "name": "--conf",
      "synonyms": "NA",
      "type": "List[String]",
      "required": "no",
      "fulltext": "",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "If true, create a BAM index when writing a coordinate-sorted BAM file.",
      "name": "--create-output-bam-index",
      "synonyms": "-OBI",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "true",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "If true, create a BAM splitting index (SBI) when writing a coordinate-sorted BAM file.",
      "name": "--create-output-bam-splitting-index",
      "synonyms": "NA",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "true",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "If true, create a VCF index when writing a coordinate-sorted VCF file.",
      "name": "--create-output-variant-index",
      "synonyms": "-OVI",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "true",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Read filters to be disabled before analysis",
      "name": "--disable-read-filter",
      "synonyms": "-DF",
      "type": "List[String]",
      "required": "no",
      "fulltext": "",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "If specified, do not check the sequence dictionaries from our inputs for compatibility. Use at your own risk!",
      "name": "--disable-sequence-dictionary-validation",
      "synonyms": "-disable-sequence-dictionary-validation",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Disable all tool default read filters (WARNING: many tools will not function correctly without their default read filters on)",
      "name": "--disable-tool-default-read-filters",
      "synonyms": "-disable-tool-default-read-filters",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Divide abundance scores by each taxon\u0027s reference genome length (in millions)",
      "name": "--divide-by-genome-length",
      "synonyms": "-divide-by-genome-length",
      "type": "boolean",
      "required": "no",
      "fulltext": "If true, the score contributed by each read is divided by the mapped organism\u0027s genome length in the reference.",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Base quality to assign low-complexity bases",
      "name": "--dust-mask-quality",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "",
      "defaultValue": "2",
      "minValue": "-Infinity",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "DUST algorithm score threshold",
      "name": "--dust-t",
      "synonyms": "NA",
      "type": "double",
      "required": "no",
      "fulltext": "Controls the stringency of low-complexity filtering.",
      "defaultValue": "20.0",
      "minValue": "-Infinity",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "DUST algorithm window size",
      "name": "--dust-window",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "",
      "defaultValue": "64",
      "minValue": "-Infinity",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "One or more genomic intervals to exclude from processing",
      "name": "--exclude-intervals",
      "synonyms": "-XL",
      "type": "List[String]",
      "required": "no",
      "fulltext": "Use this argument to exclude certain parts of the genome from the analysis (like -L, but the opposite).\n This argument can be specified multiple times. You can use samtools-style intervals either explicitly on the\n command line (e.g. -XL 1 or -XL 1:100-200) or by loading in a file containing a list of intervals\n (e.g. -XL myFile.intervals).",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "The BWA image file of the host reference. This must be distributed to local disk on each node.",
      "name": "--filter-bwa-image",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "This file should be generated using BwaMemIndexImageCreator.",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Minimum seed length for the host BWA alignment.",
      "name": "--filter-bwa-seed-length",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "Controls the sensitivity of BWA alignment to the host reference. Shorter seed lengths will enhance detection of\n host reads during the subtraction phase but will also increase run time.",
      "defaultValue": "19",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "11.0",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Filter duplicate reads",
      "name": "--filter-duplicates",
      "synonyms": "NA",
      "type": "boolean",
      "required": "no",
      "fulltext": "If true, then for any two reads with identical sequences (or identical to the other\u0027s reverse complement), one\n will be filtered.",
      "defaultValue": "true",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Log counts of filtered reads to this file",
      "name": "--filter-metrics",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "If specified, records the number of reads remaining after each of the following steps:\n \u003cul\u003e\n     \u003cli\u003ePre-aligned host read filtering\u003c/li\u003e\n     \u003cli\u003eLow-quality and low-complexity sequence filtering\u003c/li\u003e\n     \u003cli\u003eHost read subtraction\u003c/li\u003e\n     \u003cli\u003eRead deduplication\u003c/li\u003e\n \u003c/ul\u003e\n \u003cp\u003eIt also provides the following:\u003c/p\u003e\n \u003cul\u003e\n     \u003cli\u003eNumber of low-quality and low-complexity reads removed\u003c/li\u003e\n     \u003cli\u003eNumber of host reads removed\u003c/li\u003e\n     \u003cli\u003eNumber of duplicate reads removed\u003c/li\u003e\n     \u003cli\u003eFinal number of reads\u003c/li\u003e\n     \u003cli\u003eFinal number of paired reads\u003c/li\u003e\n     \u003cli\u003eFinal number of unpaired reads\u003c/li\u003e\n \u003c/ul\u003e\n\u003cp\u003eNote that using this option may substantially increase runtime.\u003c/p\u003e",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Estimated reads per partition after quality, kmer, and BWA filtering",
      "name": "--filter-reads-per-partition",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "This is a parameter for fine-tuning memory performance. Lower values may result in less memory usage but possibly\n at the expense of greater computation time.",
      "defaultValue": "200000",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "advanced",
      "options": []
    },
    {
      "summary": "A configuration file to use with the GATK.",
      "name": "--gatk-config-file",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "If the GCS bucket channel errors out, how many times it will attempt to re-initiate the connection",
      "name": "--gcs-max-retries",
      "synonyms": "-gcs-retries",
      "type": "int",
      "required": "no",
      "fulltext": "",
      "defaultValue": "20",
      "minValue": "-Infinity",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Project to bill when accessing \"requester pays\" buckets. If unset, these buckets cannot be accessed.  User must have storage.buckets.get permission on the bucket being accessed.",
      "name": "--gcs-project-for-requester-pays",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "\"\"",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "display the help message",
      "name": "--help",
      "synonyms": "-h",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Host kmer count threshold.",
      "name": "--host-kmer-thresh",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "Controls the stringency of read filtering based on host k-mer matching. Reads with at least this many matching\n k-mers in the host reference will be filtered.",
      "defaultValue": "1",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Host alignment identity score threshold, in bp",
      "name": "--host-min-identity",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "Controls the stringency of read filtering based on alignment to the host reference. The identity score is defined\n as the number of matching bases less the number of deletions in the alignment.",
      "defaultValue": "30",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Identity margin, as a fraction of the best hit (between 0 and 1). ",
      "name": "--identity-margin",
      "synonyms": "-identity-margin",
      "type": "double",
      "required": "no",
      "fulltext": "For reads having multiple alignments, the best hit is always counted as long as it is above the identity score\n threshold. Any additional hits will be counted when its identity score is within this percentage of the best hit.\n\n \u003cp\u003eFor example, consider a read that aligns to two different sequences, one with identity score 0.90 and the other with\n 0.85. If the minimum identity score is 0.7, the best hit (with score 0.90) is counted. In addition, if the identity margin is 10%,\n then any additional alignments at or above 0.90 * (1 - 0.10) \u003d 0.81 would also be counted. Therefore in this example the second\n alignment with score 0.85 would be counted.\u003c/p\u003e",
      "defaultValue": "0.02",
      "minValue": "0.0",
      "maxValue": "1.0",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Host-aligned BAM contigs to ignore",
      "name": "--ignore-alignment-contigs",
      "synonyms": "-ignore-alignment-contigs",
      "type": "List[String]",
      "required": "no",
      "fulltext": "If using --is-host-aligned, ignores alignments to these contigs (can be specified multiple times). This\n can be useful if the alignment is to a reference containing a microbe, such as chrEBV in hg38.",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "BAM/SAM/CRAM file containing reads",
      "name": "--input",
      "synonyms": "-I",
      "type": "List[GATKPath]",
      "required": "yes",
      "fulltext": "",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "required",
      "options": []
    },
    {
      "summary": "Amount of padding (in bp) to add to each interval you are excluding.",
      "name": "--interval-exclusion-padding",
      "synonyms": "-ixp",
      "type": "int",
      "required": "no",
      "fulltext": "Use this to add padding to the intervals specified using -XL. For example, \u0027-XL 1:100\u0027 with a\n padding value of 20 would turn into \u0027-XL 1:80-120\u0027. This is typically used to add padding around targets when\n analyzing exomes.",
      "defaultValue": "0",
      "minValue": "-Infinity",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Interval merging rule for abutting intervals",
      "name": "--interval-merging-rule",
      "synonyms": "-imr",
      "type": "IntervalMergingRule",
      "required": "no",
      "fulltext": "By default, the program merges abutting intervals (i.e. intervals that are directly side-by-side but do not\n actually overlap) into a single continuous interval. However you can change this behavior if you want them to be\n treated as separate intervals instead.",
      "defaultValue": "ALL",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": [
        {
          "summary": "",
          "name": "ALL"
        },
        {
          "summary": "",
          "name": "OVERLAPPING_ONLY"
        }
      ]
    },
    {
      "summary": "Amount of padding (in bp) to add to each interval you are including.",
      "name": "--interval-padding",
      "synonyms": "-ip",
      "type": "int",
      "required": "no",
      "fulltext": "Use this to add padding to the intervals specified using -L. For example, \u0027-L 1:100\u0027 with a\n padding value of 20 would turn into \u0027-L 1:80-120\u0027. This is typically used to add padding around targets when\n analyzing exomes.",
      "defaultValue": "0",
      "minValue": "-Infinity",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Set merging approach to use for combining interval inputs",
      "name": "--interval-set-rule",
      "synonyms": "-isr",
      "type": "IntervalSetRule",
      "required": "no",
      "fulltext": "By default, the program will take the UNION of all intervals specified using -L and/or -XL. However, you can\n change this setting for -L, for example if you want to take the INTERSECTION of the sets instead. E.g. to\n perform the analysis only on chromosome 1 exomes, you could specify -L exomes.intervals -L 1 --interval-set-rule\n INTERSECTION. However, it is not possible to modify the merging approach for intervals passed using -XL (they will\n always be merged using UNION).\n\n Note that if you specify both -L and -XL, the -XL interval set will be subtracted from the -L interval set.",
      "defaultValue": "UNION",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": [
        {
          "summary": "Take the union of all intervals",
          "name": "UNION"
        },
        {
          "summary": "Take the intersection of intervals (the subset that overlaps all intervals specified)",
          "name": "INTERSECTION"
        }
      ]
    },
    {
      "summary": "One or more genomic intervals over which to operate",
      "name": "--intervals",
      "synonyms": "-L",
      "type": "List[String]",
      "required": "no",
      "fulltext": "",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Set if the input BAM is aligned to the host",
      "name": "--is-host-aligned",
      "synonyms": "NA",
      "type": "boolean",
      "required": "no",
      "fulltext": "PathSeq will rapidly filter the reads if they are aligned to a host reference, thus reducing run time.",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Path to host k-mer file generated with PathSeqBuildKmers. K-mer filtering is skipped if this is not specified.",
      "name": "--kmer-file",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Maximum number of mismatches for adapter trimming",
      "name": "--max-adapter-mismatches",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "",
      "defaultValue": "1",
      "minValue": "0.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Maximum number of alternate microbe alignments",
      "name": "--max-alternate-hits",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "The maximum number of alternate alignments for each read, i.e. the alignments appearing in the XA tag.",
      "defaultValue": "5000",
      "minValue": "0.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Max allowable number of masked bases per read",
      "name": "--max-masked-bases",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "This is the threshold for filtering reads based on the number of \u0027N\u0027 values present in the sequence. Note that\n the low-complexity DUST filter and quality filter mask using \u0027N\u0027 bases. Therefore, this parameter is the threshold\n for the sum of:\n \u003cul\u003e\n     \u003cli\u003eThe number of N\u0027s in the original input read\u003c/li\u003e\n     \u003cli\u003eThe number of low-quality base calls\u003c/li\u003e\n     \u003cli\u003eThe number of low-complexity bases\u003c/li\u003e\n \u003c/ul\u003e",
      "defaultValue": "2",
      "minValue": "0.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Microbe reference BWA index image file generated using BwaMemIndexImageCreator. If running on a Spark cluster, this must be distributed to local disk on each node.",
      "name": "--microbe-bwa-image",
      "synonyms": "NA",
      "type": "String",
      "required": "yes",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "required",
      "options": []
    },
    {
      "summary": "Use the given sequence dictionary as the microbe sequence dictionary.  Must be a .dict file.",
      "name": "--microbe-dict",
      "synonyms": "NA",
      "type": "String",
      "required": "yes",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "required",
      "options": []
    },
    {
      "summary": "Minimum BWA-MEM seed length for the microbe alignment",
      "name": "--microbe-min-seed-length",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "This parameter controls the sensitivity of the BWA-MEM aligner. Smaller values result in more alignments at the\n expense of computation time.",
      "defaultValue": "19",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "11.0",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Minimum length of adapter sequence to trim",
      "name": "--min-adapter-length",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "Adapter trimming will require a match of at least this length to a known adapter.",
      "defaultValue": "12",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Bases below this call quality will be masked with \u0027N\u0027",
      "name": "--min-base-quality",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "",
      "defaultValue": "15",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Minimum length of reads after quality trimming",
      "name": "--min-clipped-read-length",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "Reads are trimmed based on base call quality and low-complexity content. Decreasing the value will enhance pathogen\n detection (higher sensitivity) but also result in undesired false positives and ambiguous microbe alignments\n (lower specificity).",
      "defaultValue": "31",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "31.0",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Alignment identity score threshold, as a fraction of the read length (between 0 and 1).",
      "name": "--min-score-identity",
      "synonyms": "-min-score-identity",
      "type": "double",
      "required": "no",
      "fulltext": "This parameter controls the stringency of the microbe alignment. The identity score threshold is defined as the\n number of matching bases minus number of deletions. Alignments below this threshold score will be ignored.",
      "defaultValue": "0.9",
      "minValue": "0.0",
      "maxValue": "1.0",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "If true, normalized abundance scores will be reported as a percentage within their kingdom.",
      "name": "--not-normalized-by-kingdom",
      "synonyms": "-not-normalized-by-kingdom",
      "type": "boolean",
      "required": "no",
      "fulltext": "Comparmentalizes the normalized abundance scores by kingdom.",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "For tools that shuffle data or write an output, sets the number of reducers. Defaults to 0, which gives one partition per 10MB of input.",
      "name": "--num-reducers",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "",
      "defaultValue": "0",
      "minValue": "-Infinity",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Output BAM",
      "name": "--output",
      "synonyms": "-O",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "when writing a bam, in single sharded mode this directory to write the temporary intermediate output shards, if not specified .parts/ will be used",
      "name": "--output-shard-tmp-dir",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Number of reads per partition to use for alignment and scoring.",
      "name": "--pipeline-reads-per-partition",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "",
      "defaultValue": "5000",
      "minValue": "100.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Name of the program running",
      "name": "--program-name",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Quality score trimmer threshold",
      "name": "--quality-threshold",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "Controls the stingency of base call quality-based read trimming. Higher values result in more trimming.",
      "defaultValue": "15",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Whether to suppress job-summary info on System.err.",
      "name": "--QUIET",
      "synonyms": "NA",
      "type": "Boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Read filters to be applied before analysis",
      "name": "--read-filter",
      "synonyms": "-RF",
      "type": "List[String]",
      "required": "no",
      "fulltext": "",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Indices to use for the read inputs. If specified, an index must be provided for every read input and in the same order as the read inputs. If this argument is not specified, the path to the index for each input will be inferred automatically.",
      "name": "--read-index",
      "synonyms": "-read-index",
      "type": "List[GATKPath]",
      "required": "no",
      "fulltext": "",
      "defaultValue": "[]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Validation stringency for all SAM/BAM/CRAM/SRA files read by this program.  The default stringency value SILENT can improve performance when processing a BAM file in which variable-length data (read, qualities, tags) do not otherwise need to be decoded.",
      "name": "--read-validation-stringency",
      "synonyms": "-VS",
      "type": "ValidationStringency",
      "required": "no",
      "fulltext": "",
      "defaultValue": "SILENT",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": [
        {
          "summary": "",
          "name": "STRICT"
        },
        {
          "summary": "",
          "name": "LENIENT"
        },
        {
          "summary": "",
          "name": "SILENT"
        }
      ]
    },
    {
      "summary": "Number of reads per partition for output. Use this to control the number of sharded BAMs (not --num-reducers).",
      "name": "--readsPerPartitionOutput",
      "synonyms": "NA",
      "type": "int",
      "required": "no",
      "fulltext": "Because numReducers is based on the input size, it causes too many partitions to be produced when the output size is much smaller.",
      "defaultValue": "1000000",
      "minValue": "100.0",
      "maxValue": "Infinity",
      "minRecValue": "100000.0",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Reference sequence",
      "name": "--reference",
      "synonyms": "-R",
      "type": "GATKPath",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Log counts of mapped and unmapped reads to this file",
      "name": "--score-metrics",
      "synonyms": "-SM",
      "type": "String",
      "required": "no",
      "fulltext": "If specified, records the following metrics:\n \u003cul\u003e\n     \u003cli\u003eNumber of reads mapped to the microbial reference\u003c/li\u003e\n     \u003cli\u003eNumber of unmapped reads\u003c/li\u003e\n \u003c/ul\u003e\n\u003cp\u003eNote that using this option may increase runtime.\u003c/p\u003e",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Estimated reads per Spark partition for scoring",
      "name": "--score-reads-per-partition-estimate",
      "synonyms": "-score-reads-per-partition-estimate",
      "type": "int",
      "required": "no",
      "fulltext": "This parameter is for fine-tuning memory performance. Lower values may result in less memory usage but possibly\n at the expense of greater computation time.",
      "defaultValue": "200000",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "advanced",
      "options": []
    },
    {
      "summary": "Write accessions found in the reads header but not the taxonomy database to this file",
      "name": "--score-warnings",
      "synonyms": "-SW",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "URI for the taxonomic scores output",
      "name": "--scores-output",
      "synonyms": "-SO",
      "type": "String",
      "required": "yes",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "required",
      "options": []
    },
    {
      "summary": "For tools that write an output, write the output in multiple pieces (shards)",
      "name": "--sharded-output",
      "synonyms": "NA",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "display hidden arguments",
      "name": "--showHidden",
      "synonyms": "-showHidden",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "advanced",
      "options": []
    },
    {
      "summary": "Skip pre-BWA repartition. Set to true for inputs with a high proportion of microbial reads that are not host coordinate-sorted.",
      "name": "--skip-pre-bwa-repartition",
      "synonyms": "NA",
      "type": "boolean",
      "required": "no",
      "fulltext": "\u003cp\u003e\n     Advanced optimization option that should be used only in the case of inputs with a high proportion of microbial\n     reads that are not host-aligned/coordinate-sorted.\n \u003c/p\u003e\n \u003cp\u003e\n In the filter tool, the input reads are initially divided up into smaller partitions (default size is usually\n the size of one HDFS block, or ~64MB) that Spark works on in parallel. In samples with a low proportion of microbial\n reads (e.g. \u003c 1%), the steps leading up to the host BWA alignment will whittle these partitions down to a small\n fraction of their original size. At that point, the distribution of reads across the partitions may be unbalanced.\n \u003c/p\u003e\n \u003cp\u003e\n     For example, say the input is 256MB and Spark splits this into 4 even partitions. It is possible that, after\n     running through the quality filters and host kmer search, there are 5% remaining in partition #1, 8% in partition #2,\n     2% in partition #3, and 20% in partition #4. Thus there is an imbalance of work across the partitions. To\n     correct this, a \"reparitioning\" is invoked that distributes the reads evenly. Note this is especially important\n     for host-aligned, coordinate-sorted inputs, in which unmapped reads would be concentrated in the last partitions.\n \u003c/p\u003e\n \u003cp\u003e\n     If, however, the proportion of microbial reads is higher, say 30%, then the partitions are generally more\n     balanced (except for in the aforementioned coordinate-sorted case). In this case, the time spent doing\n     the repartitioning is usually greater than the time saved by rebalancing, and this option should be invoked.\n \u003c/p\u003e",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "advanced",
      "options": []
    },
    {
      "summary": "Skip low-quality and low-complexity read filtering",
      "name": "--skip-quality-filters",
      "synonyms": "NA",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "URL of the Spark Master to submit jobs to when using the Spark pipeline runner.",
      "name": "--spark-master",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "local[*]",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Spark verbosity. Overrides --verbosity for Spark-generated logs only. Possible values: {ALL, DEBUG, INFO, WARN, ERROR, FATAL, OFF, TRACE}",
      "name": "--spark-verbosity",
      "synonyms": "NA",
      "type": "String",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Granularity to use when writing a splitting index, one entry will be put into the index every n reads where n is this granularity value. Smaller granularity results in a larger index with more available split points.",
      "name": "--splitting-index-granularity",
      "synonyms": "NA",
      "type": "long",
      "required": "no",
      "fulltext": "",
      "defaultValue": "4096",
      "minValue": "1.0",
      "maxValue": "Infinity",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "URI to the microbe reference taxonomy database built using PathSeqBuildReferenceTaxonomy",
      "name": "--taxonomy-file",
      "synonyms": "-T",
      "type": "String",
      "required": "yes",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "required",
      "options": []
    },
    {
      "summary": "Temp directory to use.",
      "name": "--tmp-dir",
      "synonyms": "NA",
      "type": "GATKPath",
      "required": "no",
      "fulltext": "",
      "defaultValue": "null",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Whether to use the JdkDeflater (as opposed to IntelDeflater)",
      "name": "--use-jdk-deflater",
      "synonyms": "-jdk-deflater",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Whether to use the JdkInflater (as opposed to IntelInflater)",
      "name": "--use-jdk-inflater",
      "synonyms": "-jdk-inflater",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": []
    },
    {
      "summary": "Whether to use NIO or the Hadoop filesystem (default) for reading files. (Note that the Hadoop filesystem is always used for writing files.)",
      "name": "--use-nio",
      "synonyms": "NA",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    },
    {
      "summary": "Control verbosity of logging.",
      "name": "--verbosity",
      "synonyms": "-verbosity",
      "type": "LogLevel",
      "required": "no",
      "fulltext": "",
      "defaultValue": "INFO",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "common",
      "options": [
        {
          "summary": "",
          "name": "ERROR"
        },
        {
          "summary": "",
          "name": "WARNING"
        },
        {
          "summary": "",
          "name": "INFO"
        },
        {
          "summary": "",
          "name": "DEBUG"
        }
      ]
    },
    {
      "summary": "display the version number for this tool",
      "name": "--version",
      "synonyms": "NA",
      "type": "boolean",
      "required": "no",
      "fulltext": "",
      "defaultValue": "false",
      "minValue": "NA",
      "maxValue": "NA",
      "minRecValue": "NA",
      "maxRecValue": "NA",
      "kind": "optional",
      "options": []
    }
  ],
  "description": "Combined tool that performs all PathSeq steps: read filtering, microbe reference alignment and abundance scoring\n\n \u003cp\u003ePathSeq is a suite of tools for detecting microbial organisms in deep sequenced biological samples. It is capable of\n (1) quantifying microbial abundances in metagenomic samples containing a mixture of organisms, (2) detecting extremely\n low-abundance (\u003c0.001%) organisms, and (3) identifying unknown sequences that may belong to novel organisms. The pipeline is based\n on a previously published tool of the same name (Kostic et al. 2011), which has been\n used in a wide range of studies to investigate novel associations between pathogens and human disease.\u003c/p\u003e\n\n \u003cp\u003eThe pipeline consists of three phases: (1) removing reads that are low quality, low complexity, or match a given\n host (e.g. human) reference, (2) aligning the remaining reads to a microorganism reference, and (3) determining\n the taxonomic classification of each read and estimating microbe abundances. These steps can be performed individually using\n PathSeqFilterSpark, PathSeqBwaSpark, and PathSeqScoreSpark. To simplify using the pipeline, this tool combines the\n three steps into one. Further details can be found in the individual tools\u0027 documentations.\u003c/p\u003e\n\n \u003cp\u003eThe filtering phase ensures that only high fidelity, non-host reads are classified, thus reducing computational costs\n and false positives. Note that while generally applicable to any type of biological sample (e.g. saliva, stool), PathSeq\n is particularly efficient for samples containing a high percentage of host reads (e.g. blood, tissue, CSF). PathSeq\n is able to detect evidence of low-abundance organisms and scales to use comprehensive genomic database references\n (e.g. \u003e 100 Gbp). Lastly, because PathSeq works by identifying both host and known microbial sequences, it can also\n be used to discover novel pathogens by deducing the sample to sequences of unknown origin, which may be followed\n by de novo assembly.\u003c/p\u003e\n\n \u003cp\u003eBecause sequence alignment is computationally burdensome, PathSeq is integrated with Apache Spark,\n enabling parallelization of all steps in the pipeline on multi-core workstations and cluster environments. This\n overcomes the high computational cost and permits rapid turnaround times (minutes to hours) in deep sequenced samples.\u003c/p\u003e\n\n \u003ch4\u003eReference files\u003c/h4\u003e\n\n \u003cp\u003eBefore running the PathSeq pipeline, the host and microbe references must be built. Prebuilt references\n for a standard microbial set are available in the\n \u003ca href\u003d\"https://software.broadinstitute.org/gatk/download/bundle\"\u003eGATK Resource Bundle\u003c/a\u003e.\u003c/p\u003e\n\n \u003cp\u003eTo build custom references, users must provide FASTA files of the host and pathogen sequences. Tools are included to\n generate the necessary files: the host k-mer database (PathSeqBuildKmers), BWA-MEM index image files of the host and\n pathogen references (BwaMemIndexImageCreator), and a taxonomic tree of the pathogen reference (PathSeqBuildReferenceTaxonomy).\u003c/p\u003e\n\n \u003ch3\u003eInput\u003c/h3\u003e\n\n \u003cul\u003e\n     \u003cli\u003eBAM containing input reads (either unaligned or aligned to a host reference)\u003c/li\u003e\n     \u003cli\u003eHost k-mer file generated using PathSeqBuildKmers\u003c/li\u003e\n     \u003cli\u003eHost BWA-MEM index image generated using BwaMemIndexImageCreator\u003c/li\u003e\n     \u003cli\u003eMicrobe BWA-MEM index image generated using BwaMemIndexImageCreator\u003c/li\u003e\n     \u003cli\u003eIndexed microbe reference dictionary (fasta file NOT required)\u003c/li\u003e\n     \u003cli\u003eTaxonomy file generated using PathSeqBuildReferenceTaxonomy\u003c/li\u003e\n \u003c/ul\u003e\n\n \u003ch3\u003eOutput\u003c/h3\u003e\n\n \u003cul\u003e\n     \u003cli\u003eTaxonomic scores table\u003c/li\u003e\n     \u003cli\u003eAnnotated BAM aligned to the microbe reference\u003c/li\u003e\n     \u003cli\u003eFilter metrics file (optional)\u003c/li\u003e\n     \u003cli\u003eScore metrics file (optional)\u003c/li\u003e\n \u003c/ul\u003e\n\n \u003ch3\u003eUsage example\u003c/h3\u003e\n\n \u003cp\u003eThis tool can be run without explicitly specifying Spark options. That is to say, the given example command\n without Spark options will run locally. See\n \u003ca href \u003d\"https://software.broadinstitute.org/gatk/documentation/article?id\u003d10060\"\u003eTutorial#10060\u003c/a\u003e for an example\n of how to set up and run a Spark tool on a cloud Spark cluster.\u003c/p\u003e\n\n \u003ch4\u003eLocal mode:\u003c/h4\u003e\n\n \u003cpre\u003e\n gatk PathSeqPipelineSpark  \\\n   --input input_reads.bam \\\n   --kmer-file host_kmers.bfi \\\n   --filter-bwa-image host_reference.img \\\n   --microbe-bwa-image microbe_reference.img \\\n   --microbe-dict reference.dict \\\n   --taxonomy-file taxonomy.db \\\n   --min-clipped-read-length 60 \\\n   --min-score-identity 0.90 \\\n   --identity-margin 0.02 \\\n   --scores-output scores.txt \\\n   --output output_reads.bam \\\n   --filter-metrics filter_metrics.txt \\\n   --score-metrics score_metrics.txt\n \u003c/pre\u003e\n\n \u003ch4\u003eSpark cluster on Google Cloud DataProc with 6 16-core / 208GB memory worker nodes:\u003c/h4\u003e\n\n \u003cpre\u003e\n gatk PathSeqPipelineSpark  \\\n   --input gs://my-gcs-bucket/input_reads.bam \\\n   --kmer-file hdfs://my-cluster-m:8020//host_kmers.bfi \\\n   --filter-bwa-image /references/host_reference.img \\\n   --microbe-bwa-image /references/microbe_reference.img \\\n   --microbe-dict hdfs://my-cluster-m:8020//reference.dict \\\n   --taxonomy-file hdfs://my-cluster-m:8020//taxonomy.db \\\n   --min-clipped-read-length 60 \\\n   --min-score-identity 0.90 \\\n   --identity-margin 0.02 \\\n   --scores-output gs://my-gcs-bucket/scores.txt \\\n   --output gs://my-gcs-bucket/output_reads.bam \\\n   --filter-metrics gs://my-gcs-bucket/filter_metrics.txt \\\n   --score-metrics gs://my-gcs-bucket/score_metrics.txt \\\n   -- \\\n   --sparkRunner GCS \\\n   --cluster my_cluster \\\n   --driver-memory 8G \\\n   --executor-memory 32G \\\n   --num-executors 4 \\\n   --executor-cores 30 \\\n   --conf spark.executor.memoryOverhead\u003d132000\n \u003c/pre\u003e\n\n \u003cp\u003eNote that the host and microbe BWA images must be copied to the same paths on every worker node. The microbe dictionary,\n host k-mer file, and taxonomy file may also be copied to a single path on every worker node or to HDFS.\u003c/p\u003e\n\n \u003ch3\u003eReferences\u003c/h3\u003e\n \u003col\u003e\n     \u003cli\u003eWalker, M. A., Pedamallu, C. S. et al. (2018). GATK PathSeq: a customizable computational tool for the discovery and identification of microbial sequences in libraries from eukaryotic hosts. Bioinformatics. 34, 4287-4289.\u003c/li\u003e\n     \u003cli\u003eKostic, A. D. et al. (2011). PathSeq: software to identify or discover microbes by deep sequencing of human tissue. Nat. Biotechnol. 29, 393-396.\u003c/li\u003e\n \u003c/ol\u003e",
  "name": "PathSeqPipelineSpark",
  "group": "Metagenomics",
  "beta": false,
  "experimental": false
}